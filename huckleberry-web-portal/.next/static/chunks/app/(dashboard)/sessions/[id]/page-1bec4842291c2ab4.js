(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[832],{3700:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var a=s(5155),i=s(2115),n=s(6489),r=s(8817),o=s(9261);function l(e){let{data:t}=(0,n.useSession)(),[s,l]=(0,i.useState)(""),[d,c]=(0,i.useState)(null),[h,m]=(0,i.useState)([]),[x,u]=(0,i.useState)(!0),p=(null==t?void 0:t.role)||"unknown";return((0,i.useEffect)(()=>{!async function(){e.params.then(async e=>{let{id:t}=e;l(t);try{let e=await fetch("/api/sessions/".concat(t),{cache:"no-store"}),s=await e.json().catch(()=>({}));c(s.session),m(s.images||[])}catch(e){console.error("Failed to load session:",e)}finally{u(!1)}})}()},[e.params]),x)?(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Session Detail"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-neutral-400 mt-2",children:"Loading..."})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Session Detail"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-neutral-400 mt-2",children:(null==d?void 0:d.created_at)?new Date(d.created_at).toLocaleString():"Session"})]}),(null==d?void 0:d.notes)&&(0,a.jsx)("div",{className:"p-4 rounded-md border border-gray-200 dark:border-neutral-900 bg-white dark:bg-neutral-950",children:(0,a.jsx)("p",{className:"whitespace-pre-wrap text-gray-900 dark:text-white",children:d.notes})}),(null==d?void 0:d.mentorship_id)&&(0,a.jsx)("div",{children:(0,a.jsx)(r.G,{mentorshipId:d.mentorship_id,sessionNoteId:s,onUpload:function(){s&&fetch("/api/sessions/".concat(s),{cache:"no-store"}).then(e=>e.json()).then(e=>m(e.images||[])).catch(e=>console.error("Failed to reload images:",e))},imageLimit:75,isAdmin:"admin"===p})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Session Images"}),(0,a.jsx)(o.i,{images:h,onDelete:function(e){m(t=>t.filter(t=>t.id!==e))},showDelete:!0,mentorshipId:null==d?void 0:d.mentorship_id,sessionNoteId:s})]})]})}},6591:(e,t,s)=>{Promise.resolve().then(s.bind(s,3700))}},e=>{e.O(0,[489,571,661,441,255,358],()=>e(e.s=6591)),_N_E=e.O()}]);